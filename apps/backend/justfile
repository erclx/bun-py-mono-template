# Start the web server in development mode (hot reload)
dev:
    uv run fastapi dev src/app/main.py

# Check everything (Style + Types) - CI/Strict mode
lint:
    uv run ruff check .
    uv run ruff format --check .
    uv run mypy .

# Run all formatters and linters ("Fix It" button)
fix:
    uv run ruff format .
    uv run ruff check --fix .

# Run all tests
test:
    uv run pytest

# Run tests with coverage report
test-cov:
    uv run pytest --cov=src/app --cov-report=term-missing --cov-report=html

# Remove all cache, coverage, and build files
clean:
    rm -rf .ruff_cache .mypy_cache .pytest_cache .coverage .coverage_cache htmlcov dist build
    find . -type d -name "__pycache__" -exec rm -rf {} +

# Setup the development environment
setup:
    uv sync
    uv run pre-commit install
